# ZeroMQ Topic Manager - 실시간 협업 XML 편집기

실시간 협업이 가능한 ZeroMQ 토픽 관리 XML 편집기입니다.

## 🚀 현재 상태

### ✅ 구현된 기능
- **기본 XML 편집**: 응용프로그램 및 토픽 추가/삭제/편집
- **트리 구조 편집기**: jsTree 기반 시각적 편집
- **XML 미리보기**: 실시간 XML 구조 미리보기
- **파일 관리**: XML 파일 저장/로드/백업
- **오프라인 모드**: 기본 기능은 Yjs 없이도 작동
- **연결 상태 표시**: 실시간 연결 상태 UI

### ⚠️ 현재 제한사항
- **실시간 협업**: Yjs 실시간 동기화가 완전히 구현되지 않음
- **다중 사용자**: 현재는 오프라인 모드로 기본 기능만 사용 가능
- **Python Yjs 서버**: pycrdt-websocket 의존성 문제

## 🏗️ 아키텍처

### 서버 구성
1. **Python FastAPI 서버 (포트 8000)**: 메인 애플리케이션 서버
   - REST API 엔드포인트
   - 파일 관리
   - 기본 WebSocket (제한적)

2. **Node.js Express 서버 (포트 3000)**: 정적 파일 서빙
   - 프론트엔드 파일 서빙
   - Socket.IO 사용자 관리

3. **Yjs WebSocket 서버 (포트 1234)**: 실시간 협업
   - Yjs 프로토콜 처리
   - 실시간 문서 동기화

### 클라이언트 구성
- **Yjs 라이브러리**: CDN에서 로드
- **WebSocket 연결**: 포트 1234의 Yjs 서버에 연결
- **오프라인 모드**: Yjs 연결 실패 시 기본 기능 사용

## 🔧 설치 및 실행

### 의존성 설치
```bash
# Python 의존성
pip install fastapi uvicorn pycrdt aiofiles --break-system-packages

# Node.js 의존성
npm install
```

### 서버 실행
```bash
# Python 서버 (포트 8000)
python3 main.py

# Node.js 서버 (포트 3000)
node server.js

# 또는 스크립트 사용
./start_servers.sh
```

### 접속
- 메인 애플리케이션: http://localhost:8000
- 테스트 페이지: http://localhost:8000/test_yjs

## 🎯 개선 방향

### 단기 목표
1. **Yjs 실시간 협업 완성**
   - Node.js Yjs 서버와 클라이언트 연결 개선
   - 다중 사용자 실시간 편집 구현
   - 동시 편집 충돌 해결

2. **사용자 경험 개선**
   - 실시간 커서 표시
   - 사용자 존재감 (presence)
   - 편집 히스토리

### 장기 목표
1. **고급 협업 기능**
   - 실시간 채팅
   - 편집 권한 관리
   - 버전 관리

2. **성능 최적화**
   - 대용량 XML 처리
   - 네트워크 최적화
   - 오프라인 동기화

## 📝 사용법

### 기본 사용
1. 브라우저에서 http://localhost:8000 접속
2. "App" 버튼으로 응용프로그램 추가
3. 응용프로그램 선택 후 "Topic" 버튼으로 토픽 추가
4. XML 미리보기에서 실시간 구조 확인

### 협업 사용 (개발 중)
1. 여러 사용자가 동시 접속
2. 실시간으로 편집 내용 동기화
3. 다른 사용자의 편집 내용 실시간 확인

## 🐛 알려진 문제

1. **Yjs 연결 실패**: 현재 오프라인 모드로 동작
2. **Python Yjs 서버**: pycrdt-websocket 의존성 문제
3. **실시간 동기화**: 완전히 구현되지 않음

## 🔄 최근 업데이트

- **v2.0.0**: Yjs 협업 시스템 기본 구조 구현
- **v1.5.0**: XML 편집기 기본 기능 완성
- **v1.0.0**: 초기 버전

## 📞 지원

문제가 발생하거나 개선 제안이 있으시면 이슈를 등록해주세요.

---

**참고**: 현재 Yjs 실시간 협업 기능은 개발 중이며, 기본 XML 편집 기능은 정상적으로 작동합니다.
